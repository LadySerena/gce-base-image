{
  "builders": [
    {
      "type": "googlecompute",
      "project_id": "{{env `PROJECT_ID`}}",
      "image_name": "debian-10-base-{{env `TAG_NAME`}}",
      "image_description": "base debian 10 (buster) image for gce",
      "source_image_family": "debian-10",
      "image_family": "tel-base-debian-10",
      "ssh_username": "packer",
      "zone": "us-central1-a"
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "script": "ansible-install.sh"
    },
    {
      "type": "shell",
      "script": "install-common-apps.sh"
    },
    {
      "type": "shell",
      "script": "patch.sh"
    },
    {
      "type": "file",
      "source": "sshd_config",
      "destination": "/tmp/sshd_config"
    },
    {
      "type": "shell",
      "script": "test-and-update-sshd.sh"
    }
  ]
}
